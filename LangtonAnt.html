<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>Langton Ant</title>

<style>
:root{
  --bg:#050505;
  --grid1:#0b7a2b;
  --grid2:#0fa33c;
  --cyan:#00ffff;
  --panel:#000;
  --text:#00ffff;
}

body.light{
  --bg:#eaeaea;
  --panel:#ffffff;
  --text:#008b8b;
}

body{
  margin:0;
  background:var(--bg);
  font-family:monospace;
  display:flex;
  justify-content:center;
  align-items:center;
  height:100vh;
}

#container{
  display:flex;
  gap:24px;
}

canvas{
  border:3px solid var(--cyan);
  background:
    repeating-linear-gradient(
      0deg,
      var(--grid1) 0px,
      var(--grid1) 32px,
      var(--grid2) 32px,
      var(--grid2) 64px
    ),
    repeating-linear-gradient(
      90deg,
      var(--grid1) 0px,
      var(--grid1) 32px,
      var(--grid2) 32px,
      var(--grid2) 64px
    );
}

#ui{
  width:220px;
  color:var(--text);
}

button{
  width:100%;
  background:var(--cyan);
  color:#000;
  border:none;
  padding:10px;
  margin:8px 0;
  font-weight:bold;
  cursor:pointer;
}

label{
  display:block;
  margin-top:10px;
}

input[type=range]{
  width:100%;
}
</style>
</head>

<body>
<div id="container">

<canvas id="c" width="640" height="640"></canvas>

<div id="ui">
  <div>Langtonâ€™s Ant</div>

  <label>Speed</label>
  <input type="range" id="speed" min="1" max="200" value="40">

  <button id="pause">Pause</button>
  <button id="theme">Light Mode</button>
  <button id="reset">New Game</button>
</div>

</div>

<script>
const canvas = document.getElementById("c");
const ctx = canvas.getContext("2d");

const CELL = 32;
const SIZE = 20;

let grid = Array.from({length:SIZE},()=>Array(SIZE).fill(0));

let ant = {
  x:Math.floor(SIZE/2),
  y:Math.floor(SIZE/2),
  dir:0,
  color:"#00ffff"
};

let running = true;
let timer;

/* Directions: 0 up, 1 right, 2 down, 3 left */
function step(){
  const cell = grid[ant.y][ant.x];
  ant.dir = cell ? (ant.dir+3)%4 : (ant.dir+1)%4;
  grid[ant.y][ant.x] ^= 1;

  if(ant.dir===0) ant.y--;
  if(ant.dir===1) ant.x++;
  if(ant.dir===2) ant.y++;
  if(ant.dir===3) ant.x--;

  ant.x = (ant.x+SIZE)%SIZE;
  ant.y = (ant.y+SIZE)%SIZE;
}

function draw(){
  ctx.clearRect(0,0,canvas.width,canvas.height);

  // draw black cells
  ctx.fillStyle="#000";
  for(let y=0;y<SIZE;y++){
    for(let x=0;x<SIZE;x++){
      if(grid[y][x]){
        ctx.fillRect(x*CELL,y*CELL,CELL,CELL);
      }
    }
  }

  // ant
  ctx.fillStyle=ant.color;
  ctx.fillRect(ant.x*CELL,ant.y*CELL,CELL,CELL);
}

function loop(){
  step();
  draw();
}

function start(){
  clearInterval(timer);
  timer=setInterval(loop,201-speed.value);
}

speed.oninput=start;

pause.onclick=()=>{
  running=!running;
  if(running) start();
  else clearInterval(timer);
};

reset.onclick=()=>{
  grid=Array.from({length:SIZE},()=>Array(SIZE).fill(0));
  ant.x=Math.floor(SIZE/2);
  ant.y=Math.floor(SIZE/2);
};

theme.onclick=()=>{
  document.body.classList.toggle("light");
};

start();
draw();
</script>

</body>
</html>
